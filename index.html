<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Red Flags CTF - Cybers√©curit√©</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0e27;
            background-image: 
                radial-gradient(at 0% 0%, rgba(30, 64, 175, 0.3) 0px, transparent 50%),
                radial-gradient(at 100% 0%, rgba(59, 130, 246, 0.2) 0px, transparent 50%),
                radial-gradient(at 100% 100%, rgba(30, 64, 175, 0.3) 0px, transparent 50%),
                radial-gradient(at 0% 100%, rgba(15, 23, 42, 0.5) 0px, transparent 50%);
            color: #1e293b;
            line-height: 1.7;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 40px;
        }

        header {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.1);
            padding: 60px 40px;
            border-radius: 30px;
            margin: 40px auto;
            box-shadow: 
                0 20px 60px rgba(0,0,0,0.4),
                inset 0 1px 0 rgba(255,255,255,0.1);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        h1 {
            background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 50%, #2563eb 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 3.5em;
            font-weight: 800;
            margin-bottom: 20px;
            letter-spacing: -0.02em;
            position: relative;
            z-index: 1;
        }

        .subtitle {
            color: #94a3b8;
            font-size: 1.3em;
            font-weight: 400;
            position: relative;
            z-index: 1;
        }

        nav {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(20px);
            padding: 20px 30px;
            border-radius: 20px;
            margin: 30px auto;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            border: 1px solid rgba(59, 130, 246, 0.2);
            position: relative;
            z-index: 100;
        }

        nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 12px;
        }

        nav a {
            color: #cbd5e1;
            text-decoration: none;
            padding: 14px 28px;
            border-radius: 12px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 600;
            cursor: pointer;
            font-size: 0.95em;
            letter-spacing: 0.02em;
            position: relative;
            overflow: hidden;
        }

        nav a::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            opacity: 0;
            transition: opacity 0.3s;
            z-index: -1;
        }

        nav a:hover::before, nav a.active::before {
            opacity: 1;
        }

        nav a:hover, nav a.active {
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.4);
        }

        .section {
            background: rgba(255, 255, 255, 0.98);
            padding: 50px;
            border-radius: 25px;
            margin-bottom: 40px;
            box-shadow: 
                0 20px 60px rgba(0,0,0,0.3),
                inset 0 1px 0 rgba(255,255,255,0.5);
            display: none;
            animation: fadeInUp 0.6s ease-out;
            border: 1px solid rgba(255,255,255,0.2);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section.active {
            display: block;
        }

        h2 {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 2.5em;
            font-weight: 700;
            margin-bottom: 30px;
            letter-spacing: -0.02em;
            position: relative;
            padding-bottom: 20px;
        }

        h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, #3b82f6, transparent);
            border-radius: 2px;
        }

        p {
            color: #475569;
            font-size: 1.05em;
            margin-bottom: 15px;
        }

        ul {
            margin-left: 25px;
            margin-top: 15px;
        }

        li {
            margin-bottom: 12px;
            color: #475569;
            line-height: 1.8;
        }

        .ctf-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .challenge-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(248,250,252,0.9) 100%);
            padding: 30px;
            border-radius: 20px;
            border-left: 5px solid #3b82f6;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .challenge-card.locked {
            opacity: 0.6;
            cursor: not-allowed;
            border-left-color: #94a3b8;
        }

        .challenge-card.completed {
            border-left-color: #10b981;
        }

        .challenge-card:not(.locked):hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(59,130,246,0.2);
        }

        .challenge-number {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            display: inline-block;
            margin-bottom: 15px;
            font-weight: 700;
            font-size: 0.9em;
            letter-spacing: 0.05em;
        }

        .challenge-card.locked .challenge-number {
            background: linear-gradient(135deg, #cbd5e1, #94a3b8);
        }

        .challenge-card.completed .challenge-number {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .challenge-card.completed::after {
            content: "‚úì";
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2em;
            color: #10b981;
            font-weight: bold;
        }

        .challenge-card.locked::after {
            content: "üîí";
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 1.5em;
        }

        .challenge-title {
            font-size: 1.4em;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 10px;
        }

        .challenge-desc {
            color: #64748b;
            font-size: 0.95em;
            line-height: 1.6;
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 25px 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            border: 1px solid rgba(59,130,246,0.2);
        }

        .progress-text {
            text-align: center;
            margin-bottom: 15px;
            font-weight: 700;
            color: #1e40af;
            font-size: 1.1em;
        }

        .progress-container {
            background: #e2e8f0;
            height: 30px;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
        }

        .progress-fill {
            background: linear-gradient(90deg, #3b82f6 0%, #2563eb 100%);
            height: 100%;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 0.95em;
            box-shadow: 0 2px 10px rgba(59,130,246,0.5);
        }

        .tool-card {
            background: white;
            border: 2px solid #e0e7ff;
            padding: 30px;
            border-radius: 18px;
            margin-bottom: 25px;
            transition: all 0.4s;
            box-shadow: 0 2px 15px rgba(0,0,0,0.05);
        }

        .tool-card:hover {
            border-color: #3b82f6;
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(59,130,246,0.15);
        }

        .tool-card h4 {
            color: #1e40af;
            margin-bottom: 15px;
            font-size: 1.3em;
            font-weight: 600;
        }

        code {
            background: #1e293b;
            color: #22d3ee;
            padding: 4px 10px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            font-weight: 500;
        }

        .admin-login {
            max-width: 450px;
            margin: 80px auto;
            background: white;
            padding: 50px 40px;
            border-radius: 25px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            text-align: center;
            border: 1px solid rgba(59,130,246,0.2);
        }

        .admin-login h3 {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 35px;
            font-size: 2em;
        }

        .admin-input {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid #3b82f6;
            border-radius: 12px;
            font-size: 1.05em;
            margin-bottom: 25px;
            transition: all 0.3s;
        }

        .admin-input:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 4px rgba(59,130,246,0.2);
        }

        .submit-btn {
            padding: 16px 35px;
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.05em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(59,130,246,0.3);
            letter-spacing: 0.02em;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(59,130,246,0.5);
        }

        .message {
            padding: 16px 20px;
            border-radius: 12px;
            margin-top: 20px;
            font-weight: 600;
            display: none;
        }

        .message.error {
            background: linear-gradient(135deg, #fee2e2, #fecaca);
            border: 2px solid #ef4444;
            color: #991b1b;
            display: block;
        }

        .admin-content {
            display: none;
        }

        .admin-content.unlocked {
            display: block;
        }

        .flag-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 25px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .flag-table th {
            background: linear-gradient(135deg, #1e40af, #3b82f6);
            color: white;
            padding: 18px 20px;
            text-align: left;
            font-weight: 700;
            letter-spacing: 0.02em;
        }

        .flag-table td {
            padding: 18px 20px;
            border-bottom: 1px solid #e2e8f0;
            background: white;
        }

        .flag-table tr:last-child td {
            border-bottom: none;
        }

        .flag-table tr:hover td {
            background: #f8fafc;
        }

        .copy-btn {
            padding: 8px 18px;
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 2px 10px rgba(16,185,129,0.2);
        }

        .copy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(16,185,129,0.4);
        }

        footer {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(20px);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            margin-top: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            border: 1px solid rgba(59,130,246,0.2);
            color: #cbd5e1;
        }

        footer p {
            color: #cbd5e1;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
            20%, 40%, 60%, 80% { transform: translateX(10px); }
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 20px;
            }

            h1 {
                font-size: 2.2em;
            }

            h2 {
                font-size: 1.8em;
            }

            header {
                padding: 40px 25px;
            }

            nav ul {
                flex-direction: column;
            }

            .section {
                padding: 30px 25px;
            }

            .ctf-grid {
                grid-template-columns: 1fr;
            }
        }

        ::-webkit-scrollbar {
            width: 12px;
        }

        ::-webkit-scrollbar-track {
            background: #1e293b;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            border-radius: 6px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #2563eb, #1e40af);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üõ°Ô∏è Red Flags CTF</h1>
            <p class="subtitle">Cybers√©curit√© Web ‚Ä¢ Challenges Kids ‚Ä¢ Partie 1</p>
        </header>

        <nav>
            <ul>
                <li><a onclick="showSection('introduction')" class="active">Introduction</a></li>
                <li><a onclick="showSection('ctf')">CTF Interactif</a></li>
                <li><a onclick="showSection('aide')">Aide & Outils</a></li>
                <li><a onclick="showSection('conclusion')">Conclusion</a></li>
                <li><a onclick="showSection('admin')">üîí Admin</a></li>
            </ul>
        </nav>

        <!-- INTRODUCTION -->
        <section id="introduction" class="section active">
            <h2>üìã Introduction</h2>
            <p>Bienvenue dans le <strong>Red Flags CTF</strong> ! Ce challenge de cybers√©curit√© te permettra d'identifier et d'exploiter 8 vuln√©rabilit√©s web courantes.</p>
            
            <p style="margin-top: 20px;"><strong>Objectifs du CTF :</strong></p>
            <ul>
                <li>üîç Identifier les Red Flags (indices de failles de s√©curit√©)</li>
                <li>üéØ Trouver les flags cach√©s dans chaque d√©fi</li>
                <li>üõ°Ô∏è Comprendre les risques en contexte professionnel</li>
                <li>‚úÖ Apprendre les mesures de protection (Blue Team)</li>
            </ul>

            <p style="margin-top: 25px;"><strong>Comment √ßa marche ?</strong></p>
            <p>Chaque d√©fi est une page web diff√©rente avec un flag cach√©. Tu dois analyser le code, utiliser les outils de d√©veloppement, et trouver le flag au format <code>FLAG{...}</code>. Les d√©fis se d√©bloquent progressivement - tu dois r√©soudre le d√©fi N pour acc√©der au d√©fi N+1.</p>

            <p style="margin-top: 25px; padding: 20px; background: linear-gradient(135deg, #dbeafe, #bfdbfe); border-radius: 15px; border-left: 5px solid #3b82f6;">
                <strong>üí° Astuce :</strong> Consulte la section "Aide & Outils" pour d√©couvrir les outils n√©cessaires √† la r√©solution des d√©fis !
            </p>
        </section>

        <!-- CTF INTERACTIF -->
        <section id="ctf" class="section">
            <h2>üéÆ CTF Interactif</h2>
            <p style="margin-bottom: 30px; font-size: 1.1em; color: #64748b;">S√©lectionne un d√©fi pour commencer ! La difficult√© augmente progressivement. üöÄ</p>

            <div class="progress-bar">
                <div class="progress-text">Progression : <span id="progress-count">0</span> / 8 d√©fis compl√©t√©s</div>
                <div class="progress-container">
                    <div class="progress-fill" id="progress-fill" style="width: 0%;">0%</div>
                </div>
            </div>

            <div class="ctf-grid" id="challenges-grid">
                <!-- Les cartes de d√©fis seront g√©n√©r√©es par JavaScript -->
            </div>
        </section>

        <!-- AIDE & OUTILS -->
        <section id="aide" class="section">
            <h2>üõ†Ô∏è Aide & Outils</h2>

            <div class="tool-card">
                <h4>üîç Inspecteur de navigateur (DevTools)</h4>
                <p><strong>R√¥le :</strong> Examiner le code source HTML, CSS, JavaScript d'une page web.</p>
                <p><strong>Raccourci :</strong> <code>F12</code> ou Clic droit > "Inspecter"</p>
                <p><strong>Utilisation :</strong> Identifier des commentaires cach√©s, analyser le DOM, examiner les cookies et le stockage local.</p>
            </div>

            <div class="tool-card">
                <h4>üîê CyberChef</h4>
                <p><strong>R√¥le :</strong> Outil de d√©codage/encodage et manipulation de donn√©es (le "couteau suisse" de la crypto).</p>
                <p><strong>Fonctionnement :</strong> Interface web permettant d'appliquer diff√©rentes "recettes" (Base64, ROT13, MD5, etc.).</p>
                <p><strong>Lien :</strong> <a href="https://www.challenges-kids.fr/cyberchef/" target="_blank" style="color: #3b82f6; font-weight: 600;">CyberChef Challenges Kids</a></p>
            </div>

            <div class="tool-card">
                <h4>üìù Afficher le code source</h4>
                <p><strong>R√¥le :</strong> Voir le code HTML brut de la page.</p>
                <p><strong>Raccourci :</strong> <code>Ctrl+U</code> (ou Cmd+U sur Mac) ou Clic droit > "Afficher le code source de la page"</p>
                <p><strong>Utilisation :</strong> Trouver des commentaires, des scripts, des donn√©es cach√©es dans le HTML.</p>
            </div>

            <div class="tool-card">
                <h4>üåê Console JavaScript</h4>
                <p><strong>R√¥le :</strong> Ex√©cuter du code JavaScript et voir les logs.</p>
                <p><strong>Acc√®s :</strong> DevTools (F12) > Onglet "Console"</p>
                <p><strong>Utilisation :</strong> Voir les messages console.log(), ex√©cuter du code pour manipuler la page.</p>
            </div>

            <div class="tool-card">
                <h4>üç™ Stockage du navigateur</h4>
                <p><strong>R√¥le :</strong> Examiner les cookies, localStorage, sessionStorage.</p>
                <p><strong>Acc√®s :</strong> DevTools (F12) > Onglet "Application" (Chrome) ou "Storage" (Firefox)</p>
                <p><strong>Utilisation :</strong> Identifier des donn√©es stock√©es c√¥t√© client.</p>
            </div>

            <h3 style="margin-top: 40px; color: #1e40af; font-size: 1.8em;">üìö Ressources suppl√©mentaires</h3>
            <ul style="font-size: 1.05em;">
                <li><a href="https://www.challenges-kids.fr/categories/aide/" target="_blank" style="color: #3b82f6; font-weight: 600;">Page d'aide Challenges Kids</a></li>
                <li><a href="https://owasp.org/www-project-top-ten/" target="_blank" style="color: #3b82f6; font-weight: 600;">OWASP Top 10</a> - Les vuln√©rabilit√©s web critiques</li>
                <li>Techniques d'encodage courantes : Base64, URL encoding, Hex</li>
            </ul>
        </section>

        <!-- CONCLUSION -->
        <section id="conclusion" class="section">
            <h2>üéì Conclusion</h2>
            <p style="font-size: 1.1em; margin-bottom: 20px;">√Ä travers ces 8 d√©fis progressifs, tu auras appris √† :</p>
            <ul style="font-size: 1.05em;">
                <li>‚úÖ Identifier m√©thodiquement des Red Flags sur des sites web</li>
                <li>‚úÖ Utiliser des outils professionnels de cybers√©curit√© (DevTools, CyberChef)</li>
                <li>‚úÖ Comprendre les risques r√©els en contexte professionnel</li>
                <li>‚úÖ Proposer des solutions techniques concr√®tes (Blue Team)</li>
            </ul>
            <p style="margin-top: 30px; font-size: 1.1em;"><strong>Le√ßon principale :</strong> La cybers√©curit√© n'est pas seulement une question technique - c'est aussi une question de m√©thodologie, de vigilance et de compr√©hension des comportements humains.</p>
            
            <p style="margin-top: 25px; padding: 25px; background: linear-gradient(135deg, #dcfce7, #bbf7d0); border-radius: 15px; border-left: 5px solid #10b981; font-size: 1.05em;">
                <strong>üéâ F√©licitations si tu as compl√©t√© tous les d√©fis !</strong> Tu poss√®des maintenant les bases solides pour continuer ton apprentissage en cybers√©curit√© offensive et d√©fensive.
            </p>
        </section>

        <!-- ADMIN -->
        <section id="admin" class="section">
            <div class="admin-login" id="admin-login">
                <h3>üîí Acc√®s Staff</h3>
                <p style="margin-bottom: 25px; color: #64748b; font-size: 1.05em;">Entrez le mot de passe administrateur</p>
                <input type="password" 
                       class="admin-input" 
                       id="admin-password" 
                       placeholder="Mot de passe"
                       onkeypress="if(event.key === 'Enter') unlockAdmin()">
                <button class="submit-btn" onclick="unlockAdmin()">D√©verrouiller</button>
                <div class="message" id="admin-message"></div>
            </div>

            <div class="admin-content" id="admin-content">
                <h2>üîì Panel Admin - Tous les Flags</h2>
                <p style="margin-bottom: 25px; font-size: 1.05em; color: #64748b;">Liste compl√®te des flags pour validation :</p>

                <table class="flag-table">
                    <thead>
                        <tr>
                            <th>D√©fi</th>
                            <th>Titre</th>
                            <th>Flag</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Le contenu sera g√©n√©r√© dynamiquement par renderAdminTable() -->
                        <tr>
                            <td colspan="4" style="text-align: center; color: #64748b; padding: 30px;">
                                Chargement...
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div style="margin-top: 30px; padding: 25px; background: linear-gradient(135deg, #fef3c7, #fde68a); border-radius: 15px; border-left: 5px solid #f59e0b;">
                    <strong>‚ö†Ô∏è Attention :</strong> Ces informations sont r√©serv√©es au staff uniquement. Ne pas partager les flags avec les participants !
                </div>
            </div>
        </section>

        <footer>
            <p style="font-weight: 600; font-size: 1.05em;">üõ°Ô∏è Projet Cybers√©curit√© - S√©quence 2</p>
            <p style="margin-top: 10px; font-size: 0.95em;">Challenges Kids ‚Ä¢ Partie 1 : Web (D√©fis 1 √† 8)</p>
        </footer>
    </div>

    <script>
        // Donn√©es des d√©fis
        const challenges = [
            {
                id: 1,
                title: "Inspection du Code Source",
                description: "D√©couvre le secret cach√© dans les commentaires HTML",
                difficulty: "Facile"
            },
            {
                id: 2,
                title: "D√©codage Base64",
                description: "D√©code un message pour r√©v√©ler le flag",
                difficulty: "Facile"
            },
            {
                id: 3,
                title: "Param√®tres URL",
                description: "Analyse l'URL pour trouver le flag",
                difficulty: "Facile"
            },
            {
                id: 4,
                title: "Cookies Non S√©curis√©s",
                description: "Explore les cookies du navigateur",
                difficulty: "Moyen"
            },
            {
                id: 5,
                title: "Console JavaScript",
                description: "Cherche dans les logs de la console",
                difficulty: "Moyen"
            },
            {
                id: 6,
                title: "Chiffrement ROT13",
                description: "Casse un chiffrement simple",
                difficulty: "Moyen"
            },
            {
                id: 7,
                title: "√âl√©ments HTML Cach√©s",
                description: "Trouve ce qui est cach√© avec CSS",
                difficulty: "Difficile"
            },
            {
                id: 8,
                title: "Code JavaScript Expos√©",
                description: "Fouille dans le code source JavaScript",
                difficulty: "Difficile"
            }
        ];

        // Gestion de la progression
        function getProgress() {
            const saved = localStorage.getItem('ctf_progress');
            return saved ? JSON.parse(saved) : [];
        }

        function saveProgress(challengeId) {
            const progress = getProgress();
            if (!progress.includes(challengeId)) {
                progress.push(challengeId);
                localStorage.setItem('ctf_progress', JSON.stringify(progress));
            }
            updateProgressBar();
        }

        function updateProgressBar() {
            const progress = getProgress();
            const percentage = (progress.length / 8) * 100;
            document.getElementById('progress-count').textContent = progress.length;
            document.getElementById('progress-fill').style.width = percentage + '%';
            document.getElementById('progress-fill').textContent = Math.round(percentage) + '%';
        }

        function isUnlocked(challengeId) {
            if (challengeId === 1) return true;
            const progress = getProgress();
            return progress.includes(challengeId - 1);
        }

        function isCompleted(challengeId) {
            return getProgress().includes(challengeId);
        }

        function renderChallenges() {
            const grid = document.getElementById('challenges-grid');
            grid.innerHTML = '';

            challenges.forEach(challenge => {
                const unlocked = isUnlocked(challenge.id);
                const completed = isCompleted(challenge.id);
                
                const card = document.createElement('div');
                card.className = `challenge-card ${!unlocked ? 'locked' : ''} ${completed ? 'completed' : ''}`;
                
                card.innerHTML = `
                    <span class="challenge-number">D√âFI ${challenge.id}</span>
                    <div class="challenge-title">${challenge.title}</div>
                    <div class="challenge-desc">${challenge.description}</div>
                    <div style="margin-top: 15px; font-size: 0.85em; color: #64748b;">
                        <strong>Difficult√© :</strong> ${challenge.difficulty}
                    </div>
                `;

                if (unlocked) {
                    card.onclick = () => {
                        window.location.href = `defi${challenge.id}.html`;
                    };
                }

                grid.appendChild(card);
            });

            updateProgressBar();
        }

        // Navigation
        function showSection(sectionId) {
            // Auto-lock admin when leaving the section
            if (sectionId !== 'admin') {
                document.getElementById('admin-login').style.display = 'block';
                document.getElementById('admin-content').classList.remove('unlocked');
                document.getElementById('admin-password').value = '';
                const message = document.getElementById('admin-message');
                if (message) message.style.display = 'none';
            }

            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
            
            document.querySelectorAll('nav a').forEach(link => {
                link.classList.remove('active');
            });
            event.target.classList.add('active');
            
            if (sectionId === 'ctf') {
                renderChallenges();
            }
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Admin - Secured with SHA-256
        async function unlockAdmin() {
            const password = document.getElementById('admin-password').value;
            const message = document.getElementById('admin-message');
            
            // Hash du mot de passe avec SHA-256
            const hash = await hashPassword(password);
            // Hash SHA-256 de "KMN2008" - le mot de passe n'est JAMAIS stock√© en clair
            const correctHash = "d935a2d57cba2e5e3ad631ebb17f2c5d94ac046ec7498edd5c99d7a886baed56";
            
            if (hash === correctHash) {
                document.getElementById('admin-login').style.display = 'none';
                document.getElementById('admin-content').classList.add('unlocked');
                renderAdminTable();
            } else {
                message.className = 'message error';
                message.textContent = '‚ùå Mot de passe incorrect !';
                
                const input = document.getElementById('admin-password');
                input.style.animation = 'shake 0.5s';
                setTimeout(() => {
                    input.style.animation = '';
                }, 500);
            }
        }

        async function hashPassword(password) {
            const encoder = new TextEncoder();
            const data = encoder.encode(password);
            const hashBuffer = await crypto.subtle.digest('SHA-256', data);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            return hashHex;
        }

        function renderAdminTable() {
            const progress = getProgress();
            
            // Flags chiffr√©s - impossible √† lire directement dans le code
            const encryptedFlags = [
                { id: 1, title: "Inspection du Code Source", enc: "RkxBR3sxbnNwM2N0X3RoM19zMHVyYzNfYzBkM30=" },
                { id: 2, title: "D√©codage Base64", enc: "RkxBR3tiNHMzNjRfMXNfbjB0X3MzY3VyMXR5fQ==" },
                { id: 3, title: "Param√®tres URL", enc: "RkxBR3t1cmxfcDRyNG0zdDNyc180cjNfdjFzMWJsM30=" },
                { id: 4, title: "Cookies Non S√©curis√©s", enc: "RkxBR3tjMDBrMTNzXzRyM19uMHRfcDRmM30=" },
                { id: 5, title: "Console JavaScript", enc: "RkxBR3tjMG5zMGwzX2wwZ3NfbDM0a19kNHQ0fQ==" },
                { id: 6, title: "Chiffrement ROT13", enc: "RkxBR3tyMHQxM19pc190b29fd2Vha30=" },
                { id: 7, title: "√âl√©ments HTML Cach√©s", enc: "RkxBR3toMWRkM25fM2wzbTNudHNfNHIzX3YxczFibDN9" },
                { id: 8, title: "Code JavaScript Expos√©", enc: "RkxBR3tqNHY0c2NyMXB0XzFzX3B1YmwxY30=" }
            ];

            const tableBody = document.querySelector('.flag-table tbody');
            tableBody.innerHTML = '';

            // D√©chiffrer et afficher tous les flags
            encryptedFlags.forEach(item => {
                const completed = progress.includes(item.id);
                const flag = atob(item.enc); // D√©chiffrement Base64
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>D√©fi ${item.id}</strong> ${completed ? '<span style="color: #10b981; font-size: 1.2em;">‚úì</span>' : ''}</td>
                    <td>${item.title}</td>
                    <td><code>${flag}</code></td>
                    <td><button class="copy-btn" onclick="copyFlag('${flag}')">Copier</button></td>
                `;
                tableBody.appendChild(row);
            });
        }

        function copyFlag(flag) {
            navigator.clipboard.writeText(flag).then(() => {
                alert('‚úÖ Flag copi√© : ' + flag);
            });
        }

        // Init
        document.addEventListener('DOMContentLoaded', () => {
            renderChallenges();
        });
    </script>
</body>
</html>
